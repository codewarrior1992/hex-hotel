"use strict";(self["webpackChunkhex_hotel"]=self["webpackChunkhex_hotel"]||[]).push([[95],{1095:function(t,e,s){s.r(e),s.d(e,{default:function(){return _}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"admin-order"},[s("div",{staticClass:"row justify-content-between"},[s("div",{staticClass:"col-xl-4 col-lg-4 col-md-6 col-sm-12"},[s("ul",{staticClass:"tabs"},[s("li",[s("a",{class:{active:null==t.tab},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.classifyOrders(null)}}},[t._v(" "+t._s(t.$t("admin.all"))+" ")])]),s("li",[s("a",{class:{active:1==t.tab},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.classifyOrders(!0)}}},[t._v(" "+t._s(t.$t("admin.future"))+" ")])]),s("li",[s("a",{class:{active:0==t.tab},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.classifyOrders(!1)}}},[t._v(" "+t._s(t.$t("admin.before"))+" ")])])])]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-12 align-items-stretch"},[s("div",{staticClass:"search-group"},[s("div",{staticClass:"input-field"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"value",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("admin.input")},domProps:{value:t.value},on:{click:function(t){t.preventDefault()},input:function(e){e.target.composing||(t.value=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.suggestion.length>0?s("ul",{staticClass:"suggestion"},t._l(t.suggestion,(function(e,a){return s("li",{key:a},[s("a",{on:{click:function(s){s.preventDefault(),t.value=e}}},[t._v(t._s(e))])])})),0):t._e()]),s("a",{staticClass:"find",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.findOrders.apply(null,arguments)}}},[s("svg",{staticClass:"bi bi-send-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"}})])])])])]),s("div",{staticClass:"list"},[t.filteredOrders.length>0?s("div",{staticClass:"result"},[s("h2",[t._v(" "+t._s(t.$t("admin.result"))+" ")]),s("a",{staticClass:"reset",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[s("svg",{staticClass:"bi bi-arrow-clockwise",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}}),s("path",{attrs:{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"}})])])]):t._e(),t.rawOrders.length>0?s("ul",{staticClass:"row"},t._l(t.newOrders,(function(e,a){return s("li",{key:a,staticClass:"col-xl-4 col-lg-6 col-md-6 col-sm-12"},[s("div",{staticClass:"item"},[e.room?s("div",{staticClass:"image",style:{backgroundImage:"url("+e.room.images[0]+")"}}):t._e(),s("div",{staticClass:"content"},[e.room?s("h2",{staticClass:"room"},[t._v(t._s(e.room.title[t.locale]))]):t._e(),s("p",{staticClass:"icon"},[s("span",{staticClass:"material-symbols-outlined"},[t._v("content_copy")]),t._v(" "+t._s(e.oid)+" ")]),s("p",{staticClass:"icon"},[s("span",{staticClass:"material-symbols-outlined"},[t._v("date_range")]),t._v(" "+t._s(new Date(e.range.start).toLocaleDateString())+" - "+t._s(new Date(e.range.end).toLocaleDateString())+" ")]),s("i18n-n",{staticClass:"text-danger fw-bold",attrs:{value:e.total[t.locale],format:"currency",locale:t.locale,tag:"P"}}),s("p",{staticClass:"badge-pill"},[e.room?s("span",{staticClass:"category"},[t._v(t._s(e.room.category[t.locale]))]):t._e(),"checked"==e.status?s("span",{staticClass:"status text-white bg-success"},[t._v(t._s(t.$t("admin.status_checked")))]):t._e(),"cancel"==e.status?s("span",{staticClass:"status text-white bg-danger"},[t._v(t._s(t.$t("admin.status_cancel")))]):t._e(),"available"==e.status?s("span",{staticClass:"status text-white bg-primary"},[t._v(t._s(t.$t("admin.status_available")))]):t._e()]),s("div",{staticClass:"buttons"},[s("a",{staticClass:"check-btn",class:{disable:t.compareDateForModal(e)},attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.openEditModal(e)}}},[s("span",{staticClass:"material-symbols-outlined"},[t._v(" settings ")]),t._v(" "+t._s(t.$t("admin.edit"))+" ")]),s("a",{staticClass:"delete-btn",class:{disable:t.compareDateForModal(e)},attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.openDeleteModal(e)}}},[s("span",{staticClass:"material-symbols-outlined"},[t._v(" delete ")]),t._v(" "+t._s(t.$t("admin.delete"))+" ")])])],1)])])})),0):s("div",{staticClass:"none"},[s("h3",[t._v("(;-;)")]),s("p",[t._v(t._s(t.$t("admin.none")))]),s("a",{staticClass:"reset",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[t._v(t._s(t.$t("admin.reset")))])])]),s("PaginationButton",{attrs:{rawOrders:t.rawOrders},on:{updatePage:t.renderOrders}})],1)},r=[],i=(s(6699),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.rawOrders.length>0?s("nav",[s("ul",{staticClass:"pagination justify-content-center page-button"},[s("li",{staticClass:"page-item",class:{disabled:0==t.currentPage}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.currentPage--}}},[t._v("«")])]),t._l(t.sortPages,(function(e,a){return s("li",{key:a,staticClass:"page-item",class:{active:t.currentPage==a}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.switchPage(a)}}},[t._v(t._s(a+1))])])})),s("li",{staticClass:"page-item",class:{disabled:t.currentPage+1==t.sortPages.length}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.currentPage++}}},[t._v("»")])])],2)]):t._e()}),l=[],o={props:{rawOrders:{type:Array,default:()=>{}}},data(){return{currentPage:0}},computed:{sortPages(){let t=[];return this.rawOrders.forEach(((e,s)=>{s%10==0&&t.push([]),t.forEach(((t,a)=>{parseInt(s/10)==a&&t.push(e)}))})),t}},methods:{switchPage(t){this.currentPage=t,this.$emit("updatePage",this.sortPages[this.currentPage])}},watch:{rawOrders(t){0!=t.length&&(this.currentPage=0,this.$emit("updatePage",this.sortPages[this.currentPage]))}},created(){this.$emit("updatePage",this.sortPages[this.currentPage])}},n=o,c=s(1001),d=(0,c.Z)(n,i,l,!1,null,null,null),u=d.exports,h=s(6407);const g=["Single Room","Deluxe Single Room","Double Room","Deluxe Double Room","Family Room","Deluxe Family Room","單人房","高級單人房","雙人房","高級雙人房","家庭房","高級家庭房","シングルルーム","デラックスシングルルーム","ダブルルーム","デラックスダブルルーム","ツインルーム","デラックスファミリールーム"];var m=s(629),p={components:{PaginationButton:u},data(){return{tab:null,value:"",order:{},isFinding:!1,suggestion:[],unEdit:!1}},watch:{value:{handler(t){if(""==t)return this.suggestion=[];this.suggestion=g.filter((e=>e.toLocaleLowerCase().includes(t.toLocaleLowerCase())))}}},computed:{locale(){return this.$i18n.locale},...(0,m.Se)(["isLoading"]),...(0,m.Se)("orderModules",["originalOrders","rawOrders"]),newOrders:{get(){return this.$store.state.orderModules.newOrders},set(t){this.$store.commit("orderModules/SET_ORDERS",t)}},filteredOrders:{get(){return this.$store.state.orderModules.filteredOrders},set(t){this.$store.commit("orderModules/SET_FILTERED_ORDERS",t)}}},methods:{async getOrders(){this.$store.dispatch("updateLoading",!0);const{access_token:t,uid:e}=(0,h.qn)(),s={headers:{Authorization:"Bearer "+t},params:{uid:e}};await this.$store.dispatch("orderModules/getOrders",s),this.classifyOrders(this.tab),this.$store.dispatch("updateLoading",!1)},classifyOrders(t){this.loading(),this.tab=t;const e={tab:this.tab,isFinding:this.isFinding};this.$store.commit("orderModules/CLASSIFY",e)},renderOrders(t){this.newOrders=t},findOrders(){if(""==this.value){const t={"en-US":"Please enter the information to search","zh-TW":"請輸入要搜尋的資料","ja-JP":"検索する情報を入力してください"};return void(0,h.BK)(t[this.locale])}this.loading();let t=Number(this.value);this.isFinding=!0;const e=t%t,s={isNum:e,value:this.value,locale:this.$i18n.locale};this.$store.commit("orderModules/FILTER",s),this.classifyOrders(this.tab),this.value=""},async openEditModal(t){if(this.compareDateForModal(t))return;const e=await this.$store.dispatch("roomModules/getRoom",t.room.rid),s={order:t,room:e.data.room,isUpdateModal:!0};this.$store.commit("orderModules/UPDATE_MODAL",s),this.$store.commit("orderModules/SET_RANGE",t.range)},openDeleteModal(t){if(this.compareDateForModal(t))return;const{uid:e}=(0,h.qn)(),s={uid:e,oid:t.oid,isDeleteModal:!0};this.$store.commit("orderModules/DELETE_MODAL",s)},compareDateForModal(t){const e=new Date(t.range.start).getTime(),s=Date.now();return s>e},loading(){this.$store.dispatch("updateLoading",!0),setTimeout((()=>{this.$store.dispatch("updateLoading",!1)}),600)},reset(){location.reload()}},created(){this.getOrders()}},v=p,f=(0,c.Z)(v,a,r,!1,null,null,null),_=f.exports}}]);
//# sourceMappingURL=95.41afa734.js.map