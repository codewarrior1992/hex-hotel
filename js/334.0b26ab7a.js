"use strict";(self["webpackChunkhex_hotel"]=self["webpackChunkhex_hotel"]||[]).push([[334],{4334:function(e,t,a){a.r(t),a.d(t,{default:function(){return M}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"admin-page"},[a("Loading-effect",{attrs:{active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}},[a("div",{staticClass:"loadingio-spinner-spinner-6hzyekklbs"},[a("div",{staticClass:"ldio-t40shzjf6m9"},[a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div"),a("div")])])]),a("AdminNav"),a("AdminModal"),a("router-view",{staticClass:"container content"}),a("FooterMap")],1)},i=[],l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"admin-navigation",class:{isActive:e.isNav}},[a("ul",{staticClass:"links"},[a("li",{staticClass:"logo-item"},[a("router-link",{staticClass:"logo",attrs:{to:"/"}},[a("span",[e._v("HH")])])],1),a("li",{staticClass:"dropdown-btn lang-item",class:{isActive:e.isLang}},[a("a",{staticClass:"lang",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.langFun.apply(null,arguments)}}},[a("span",{staticClass:"material-symbols-outlined"},[e._v(" language ")]),a("span",{staticClass:"main-text"},[e._v(e._s(e.currentLang))]),a("span",{staticClass:"material-symbols-outlined"},[e._v(" arrow_drop_down ")])]),a("ul",{staticClass:"dropdown-lang"},e._l(e.langs,(function(t,s){return a("li",{key:s},[a("a",{attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),e.langPicker(t)}}},[e._v(e._s(t.title))])])})),0)]),a("li",{staticClass:"user-item"},[a("a",{staticClass:"user",attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.logOut.apply(null,arguments)}}},[a("span",{staticClass:"material-symbols-outlined"},[e._v(" account_circle ")]),a("span",{staticClass:"main-text"},[e._v(e._s(e.$t("navbar.out")))])])])]),a("a",{staticClass:"toggle",attrs:{href:"#"},on:{click:function(t){t.preventDefault(),e.isNav=!e.isNav}}},[a("span",{staticClass:"material-symbols-outlined"},[e._v(" menu ")])])])},n=[],o=a(6407),r={data(){return{langs:[{title:"繁體中文",value:"zh-TW"},{title:"English",value:"en-US"},{title:"にほんご",value:"ja-JP"}],currentLang:"繁體中文",isNav:!1,isLang:!1,isLoading:!1}},methods:{langFun(){this.isLang=!this.isLang,this.isDate=!1,this.isRoom=!1},langPicker(e){this.currentLang=e.title,this.isLang=!this.isLang,this.$i18n.locale=e.value,localStorage.setItem("locale",e.value)},uiReset(){this.isLang=!1,this.isNav=!1},async logOut(){const{uid:e}=(0,o.qn)(),t=await this.$store.dispatch("userModules/logOut",{uid:e});t&&(localStorage.removeItem("user"),sessionStorage.removeItem("user"),(0,o.BK)(t.data.message[this.$i18n.locale]),this.$store.commit("userModules/LOGIN_STATUS",!1),this.$router.push({name:"home"}))}},mounted(){document.addEventListener("click",(e=>{this.$el.contains(e.target)||this.uiReset()})),this.langs.forEach((e=>{e.value===this.$i18n.locale&&(this.currentLang=e.title)}))}},c=r,d=a(1001),u=(0,d.Z)(c,l,n,!1,null,null,null),h=u.exports,m=function(){var e,t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"admin-modal",class:{isUpdateModal:t.isUpdateModal,isDeleteModal:t.isDeleteModal},on:{click:function(e){return e.target!==e.currentTarget?null:t.closeModal.apply(null,arguments)}}},[s("div",{staticClass:"update-modal"},[s("div",{staticClass:"header"},[t.room?s("h1",{staticClass:"modal-title fw-bold"},[t._v(t._s(t.room.title[t.locale]))]):t._e(),s("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:t.closeModal}})]),s("div",{staticClass:"body"},[s("DatePicker",{staticClass:"rounded-0",attrs:{"is-range":"","is-expanded":"",locale:{id:t.locale,firstDayOfWeek:2,masks:{weekdays:"W"}},attributes:t.attributes,"select-attribute":t.selectDragAttribute,"drag-attribute":t.selectDragAttribute,"disabled-dates":[{ordinalWeekdays:(e={},e[-1]=5,e)}],"min-date":new Date,"max-date":(new Date).setDate((new Date).getDate()+30)},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}}),s("ul",{staticClass:"expense"},[t.weekdays.length>0?s("li",{staticClass:"item"},[s("span",[void 0!==t.room?s("i18n-n",{attrs:{value:t.weekdaysPrice,format:"currency",locale:t.locale}}):t._e(),t._v(" x "+t._s(t.weekdays.length)+" "+t._s(t.$t("calendar.night"))+" ")],1),void 0!==t.room?s("i18n-n",{attrs:{value:t.calculate("weekdays"),format:"currency",locale:t.locale}}):t._e()],1):t._e(),t.weekend.length>0?s("li",{staticClass:"item"},[s("span",[void 0!==t.room?s("i18n-n",{attrs:{value:t.weekendPrice,format:"currency",locale:t.locale}}):t._e(),t._v(" x "+t._s(t.weekend.length)+" "+t._s(t.$t("calendar.night"))+" ")],1),void 0!==t.room?s("i18n-n",{attrs:{value:t.calculate("weekend"),format:"currency",locale:t.locale}}):t._e()],1):t._e(),s("li",{staticClass:"item"},[s("span",[t._v(t._s(t.$t("calendar.fee")))]),t.room?s("i18n-n",{attrs:{value:t.room.fee[t.locale],format:"currency",locale:t.locale}}):t._e()],1),s("li",{staticClass:"total"},[s("span",[t._v(t._s(t.$t("calendar.total")))]),void 0!==t.room?s("i18n-n",{attrs:{value:t.calculate("total"),format:"currency",locale:t.locale}}):t._e()],1)])],1),s("div",{staticClass:"footer"},[s("a",{staticClass:"update-btn",on:{click:function(e){return e.preventDefault(),t.updateOrder.apply(null,arguments)}}},[t._v(t._s(t.$t("admin.update")))])])]),s("div",{staticClass:"delete-modal"},[s("div",{staticClass:"header"},[s("h1",{staticClass:"fw-bold"},[t._v(t._s(t.$t("admin.confirm")))]),s("button",{staticClass:"btn-close",attrs:{type:"button"},on:{click:t.closeModal}})]),s("div",{staticClass:"footer"},[s("button",{staticClass:"delete-btn",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.deleteOrder.apply(null,arguments)}}},[t._v(t._s(t.$t("admin.delete")))])])])])},g=[],v=a(6782),f=a.n(v),p=a(629),k={components:{DatePicker:f()},data(){return{attributes:[{key:"today",highlight:{fillMode:"outline",style:{background:"#EA5B5B",border:"#2D3643"},contentStyle:{color:"#fff"},contentClass:""},dates:new Date}],selectDragAttribute:{highlight:{start:{style:{backgroundColor:"#569DC3"},contentStyle:{color:"#ffffff"}},base:{style:{backgroundColor:"#E3E6E9"},contentStyle:{color:"#748290"}},end:{style:{backgroundColor:"#569DC3"},contentStyle:{color:"#ffffff"}},order:10}},isShow:!1,weekdays:[],weekend:[],value:""}},computed:{...(0,p.Se)("orderModules",["modalData","isUpdateModal","isDeleteModal"]),range:{get(){return this.$store.state.orderModules.range},set(e){this.$store.commit("orderModules/SET_RANGE",e)}},locale(){return this.$i18n.locale},room(){return this.modalData.room},order(){return this.modalData.order},fee(){return this.room.fee[this.$i18n.locale]},weekdaysPrice(){return this.room.weekdaysPrice[this.$i18n.locale]},weekendPrice(){return this.room.weekendPrice[this.$i18n.locale]}},watch:{range(e){const{weekdays:t,weekend:a}=(0,o.pC)(new Date(e.start),new Date(e.end));this.weekdays=t,this.weekend=a}},methods:{async updateOrder(){const e={oid:this.order.oid,rid:this.room._id,range:this.range},{access_token:t}=(0,o.qn)(),a={headers:{Authorization:`Bearer ${t}`}},s=await this.$store.dispatch("orderModules/updateOrder",{data:e,config:a});await this.getOrders(),this.closeModal(),(0,o.BK)(s.data.message[this.$i18n.locale])},async deleteOrder(){const{access_token:e}=(0,o.qn)(),t={headers:{Authorization:`Bearer ${e}`}},a=this.modalData,s=await this.$store.dispatch("orderModules/deleteOrder",{data:a,config:t});this.$store.commit("orderModules/CLOSE_MODAL",!1),await this.getOrders(),(0,o.BK)(s.data.message[this.$i18n.locale])},async getOrders(){this.$store.dispatch("updateLoading",!0);const{access_token:e,uid:t}=(0,o.qn)(),a={headers:{Authorization:"Bearer "+e},params:{uid:t}};await this.$store.dispatch("orderModules/getOrders",a);const s={tab:null,isFinding:!1};this.$store.commit("orderModules/CLASSIFY",s),this.$store.dispatch("updateLoading",!1)},calculate(e){const t={key:e,weekdaysPrice:this.weekdaysPrice,weekendPrice:this.weekendPrice,weekdaysLth:this.weekdays.length,weekendLth:this.weekend.length,fee:this.fee};return(0,o.e_)(t)},closeModal(){this.$store.commit("orderModules/CLOSE_MODAL",!1)}}},_=k,y=(0,d.Z)(_,m,g,!1,null,null,null),C=y.exports,w=a(7711),b={components:{FooterMap:w.Z,AdminNav:h,AdminModal:C},computed:{...(0,p.Se)(["isLoading"])},data(){return{}}},$=b,D=(0,d.Z)($,s,i,!1,null,null,null),M=D.exports}}]);
//# sourceMappingURL=334.0b26ab7a.js.map