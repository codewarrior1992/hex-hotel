"use strict";(self["webpackChunkhex_hotel"]=self["webpackChunkhex_hotel"]||[]).push([[95],{1095:function(t,e,s){s.r(e),s.d(e,{default:function(){return C}});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"admin-order"},[s("div",{staticClass:"row justify-content-between"},[s("div",{staticClass:"col-xl-4 col-lg-4 col-md-6 col-sm-12"},[s("ul",{staticClass:"tabs"},[s("li",[s("a",{class:{active:null==t.tab},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.classifyOrders(null)}}},[t._v(" "+t._s(t.$t("admin.all"))+" ")])]),s("li",[s("a",{class:{active:1==t.tab},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.classifyOrders(!0)}}},[t._v(" "+t._s(t.$t("admin.future"))+" ")])]),s("li",[s("a",{class:{active:0==t.tab},attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.classifyOrders(!1)}}},[t._v(" "+t._s(t.$t("admin.before"))+" ")])])])]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-6 col-sm-12 align-items-stretch"},[s("div",{staticClass:"search-group"},[s("div",{staticClass:"input-field"},[s("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.value,expression:"value",modifiers:{trim:!0}}],attrs:{type:"text",placeholder:t.$t("admin.input")},domProps:{value:t.value},on:{click:function(t){t.preventDefault()},input:function(e){e.target.composing||(t.value=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t.suggestion.length>0?s("ul",{staticClass:"suggestion"},t._l(t.suggestion,(function(e,a){return s("li",{key:a},[s("a",{on:{click:function(s){s.preventDefault(),t.value=e}}},[t._v(t._s(e))])])})),0):t._e()]),s("a",{staticClass:"find",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.findOrders.apply(null,arguments)}}},[s("svg",{staticClass:"bi bi-send-fill",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{d:"M15.964.686a.5.5 0 0 0-.65-.65L.767 5.855H.766l-.452.18a.5.5 0 0 0-.082.887l.41.26.001.002 4.995 3.178 3.178 4.995.002.002.26.41a.5.5 0 0 0 .886-.083l6-15Zm-1.833 1.89L6.637 10.07l-.215-.338a.5.5 0 0 0-.154-.154l-.338-.215 7.494-7.494 1.178-.471-.47 1.178Z"}})])])])])]),s("div",{staticClass:"list"},[t.filteredOrders.length>0?s("div",{staticClass:"result"},[s("h2",[t._v(" "+t._s(t.$t("admin.result"))+" ")]),s("a",{staticClass:"reset",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[s("svg",{staticClass:"bi bi-arrow-clockwise",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",viewBox:"0 0 16 16"}},[s("path",{attrs:{"fill-rule":"evenodd",d:"M8 3a5 5 0 1 0 4.546 2.914.5.5 0 0 1 .908-.417A6 6 0 1 1 8 2v1z"}}),s("path",{attrs:{d:"M8 4.466V.534a.25.25 0 0 1 .41-.192l2.36 1.966c.12.1.12.284 0 .384L8.41 4.658A.25.25 0 0 1 8 4.466z"}})])])]):t._e(),t.rawOrders.length>0?s("ul",{staticClass:"row"},t._l(t.newOrders,(function(e,a){return s("li",{key:a,staticClass:"col-xl-4 col-lg-6 col-md-6 col-sm-12"},[s("div",{staticClass:"item"},[e.room?s("div",{staticClass:"image",style:{backgroundImage:"url("+e.room.images[0]+")"}}):t._e(),s("div",{staticClass:"content"},[e.room?s("h2",{staticClass:"room"},[t._v(t._s(e.room.title[t.locale]))]):t._e(),s("p",{staticClass:"icon"},[s("span",{staticClass:"material-symbols-outlined"},[t._v("content_copy")]),t._v(" "+t._s(e.oid)+" ")]),s("p",{staticClass:"icon"},[s("span",{staticClass:"material-symbols-outlined"},[t._v("date_range")]),t._v(" "+t._s(new Date(e.range.start).toLocaleDateString())+" - "+t._s(new Date(e.range.end).toLocaleDateString())+" ")]),s("i18n-n",{staticClass:"text-danger fw-bold",attrs:{value:e.total[t.locale],format:"currency",locale:t.locale,tag:"P"}}),s("p",{staticClass:"badge-pill"},[e.room?s("span",{staticClass:"category"},[t._v(t._s(e.room.category[t.locale]))]):t._e(),"checked"==e.status?s("span",{staticClass:"status text-white bg-success"},[t._v(t._s(t.$t("admin.status_checked")))]):t._e(),"cancel"==e.status?s("span",{staticClass:"status text-white bg-danger"},[t._v(t._s(t.$t("admin.status_cancel")))]):t._e(),"available"==e.status?s("span",{staticClass:"status text-white bg-primary"},[t._v(t._s(t.$t("admin.status_available")))]):t._e()]),s("div",{staticClass:"buttons"},[s("a",{staticClass:"check-btn",class:{disable:t.compareDateForModal(e)},attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.openEditModal(e)}}},[s("span",{staticClass:"material-symbols-outlined"},[t._v(" settings ")]),t._v(" "+t._s(t.$t("admin.edit"))+" ")]),s("a",{staticClass:"delete-btn",class:{disable:t.compareDateForModal(e)},attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.openDeleteModal(e)}}},[s("span",{staticClass:"material-symbols-outlined"},[t._v(" delete ")]),t._v(" "+t._s(t.$t("admin.delete"))+" ")])])],1)])])})),0):s("div",{staticClass:"none"},[s("h3",[t._v("(;-;)")]),s("p",[t._v(t._s(t.$t("admin.none")))]),s("a",{staticClass:"reset",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.reset.apply(null,arguments)}}},[t._v(t._s(t.$t("admin.reset")))])])]),s("PaginationButton",{attrs:{rawOrders:t.rawOrders},on:{updatePage:t.renderOrders}})],1)},r=[],i=s(6198),n=s(3019),o=(s(5666),s(7327),s(1539),s(6699),s(2023),s(9653),function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.rawOrders.length>0?s("nav",[s("ul",{staticClass:"pagination justify-content-center page-button"},[s("li",{staticClass:"page-item",class:{disabled:0==t.currentPage}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.currentPage--}}},[t._v("«")])]),t._l(t.sortPages,(function(e,a){return s("li",{key:a,staticClass:"page-item",class:{active:t.currentPage==a}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.switchPage(a)}}},[t._v(t._s(a+1))])])})),s("li",{staticClass:"page-item",class:{disabled:t.currentPage+1==t.sortPages.length}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.currentPage++}}},[t._v("»")])])],2)]):t._e()}),l=[],c=(s(4747),{props:{rawOrders:{type:Array,default:function(){}}},data:function(){return{currentPage:0}},computed:{sortPages:function(){var t=[];return this.rawOrders.forEach((function(e,s){s%10==0&&t.push([]),t.forEach((function(t,a){parseInt(s/10)==a&&t.push(e)}))})),t}},methods:{switchPage:function(t){this.currentPage=t,this.$emit("updatePage",this.sortPages[this.currentPage])}},watch:{rawOrders:function(t){0!=t.length&&(this.currentPage=0,this.$emit("updatePage",this.sortPages[this.currentPage]))}},created:function(){this.$emit("updatePage",this.sortPages[this.currentPage])}}),u=c,d=s(1001),h=(0,d.Z)(u,o,l,!1,null,null,null),f=h.exports,g=s(6407),m=["Single Room","Deluxe Single Room","Double Room","Deluxe Double Room","Family Room","Deluxe Family Room","單人房","高級單人房","雙人房","高級雙人房","家庭房","高級家庭房","シングルルーム","デラックスシングルルーム","ダブルルーム","デラックスダブルルーム","ツインルーム","デラックスファミリールーム"],p=s(629),v={components:{PaginationButton:f},data:function(){return{tab:null,value:"",order:{},isFinding:!1,suggestion:[],unEdit:!1}},watch:{value:{handler:function(t){if(""==t)return this.suggestion=[];this.suggestion=m.filter((function(e){return e.toLocaleLowerCase().includes(t.toLocaleLowerCase())}))}}},computed:(0,n.Z)((0,n.Z)((0,n.Z)({locale:function(){return this.$i18n.locale}},(0,p.Se)(["isLoading"])),(0,p.Se)("orderModules",["originalOrders","rawOrders"])),{},{newOrders:{get:function(){return this.$store.state.orderModules.newOrders},set:function(t){this.$store.commit("orderModules/SET_ORDERS",t)}},filteredOrders:{get:function(){return this.$store.state.orderModules.filteredOrders},set:function(t){this.$store.commit("orderModules/SET_FILTERED_ORDERS",t)}}}),methods:{getOrders:function(){var t=this;return(0,i.Z)(regeneratorRuntime.mark((function e(){var s,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$store.dispatch("updateLoading",!0),s=(0,g.qn)(),a=s.access_token,r=s.uid,i={headers:{Authorization:"Bearer "+a},params:{uid:r}},e.next=5,t.$store.dispatch("orderModules/getOrders",i);case 5:t.classifyOrders(t.tab),t.$store.dispatch("updateLoading",!1);case 7:case"end":return e.stop()}}),e)})))()},classifyOrders:function(t){this.loading(),this.tab=t;var e={tab:this.tab,isFinding:this.isFinding};this.$store.commit("orderModules/CLASSIFY",e)},renderOrders:function(t){this.newOrders=t},findOrders:function(){if(""!=this.value){this.loading();var t=Number(this.value);this.isFinding=!0;var e=t%t,s={isNum:e,value:this.value,locale:this.$i18n.locale};this.$store.commit("orderModules/FILTER",s),this.classifyOrders(this.tab),this.value=""}else{var a={"en-US":"Please enter the information to search","zh-TW":"請輸入要搜尋的資料","ja-JP":"検索する情報を入力してください"};(0,g.BK)(a[this.locale])}},openEditModal:function(t){var e=this;return(0,i.Z)(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!e.compareDateForModal(t)){s.next=2;break}return s.abrupt("return");case 2:return s.next=4,e.$store.dispatch("roomModules/getRoom",t.room.rid);case 4:a=s.sent,r={order:t,room:a.data.room,isUpdateModal:!0},e.$store.commit("orderModules/UPDATE_MODAL",r),e.$store.commit("orderModules/SET_RANGE",t.range);case 8:case"end":return s.stop()}}),s)})))()},openDeleteModal:function(t){if(!this.compareDateForModal(t)){var e=(0,g.qn)(),s=e.uid,a={uid:s,oid:t.oid,isDeleteModal:!0};this.$store.commit("orderModules/DELETE_MODAL",a)}},compareDateForModal:function(t){var e=new Date(t.range.start).getTime(),s=Date.now();return s>e},loading:function(){var t=this;this.$store.dispatch("updateLoading",!0),setTimeout((function(){t.$store.dispatch("updateLoading",!1)}),600)},reset:function(){location.reload()}},created:function(){this.getOrders()}},_=v,w=(0,d.Z)(_,a,r,!1,null,null,null),C=w.exports}}]);
//# sourceMappingURL=95-legacy.bc8ef2fe.js.map